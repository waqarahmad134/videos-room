steps:
  - name: Checkout code
    uses: actions/checkout@v2

  - name: Install Node.js
    uses: actions/setup-node@v2
    with:
      node-version: 16

  - name: Install project dependencies
    run: npm install

  - name: Build React project
    run: npm run build

  - name: Install lftp
    run: sudo apt-get update && sudo apt-get install -y lftp

  - name: Print FTP details for debugging
    run: |
      echo "FTP_USERNAME=${{ secrets.WEB_FTP_USERNAME }}"
      echo "FTP_HOST=${{ secrets.WEB_FTP_HOST }}"

  - name: Deploy to Shared Hosting using FTP
    env:
      FTP_USERNAME: ${{ secrets.WEB_FTP_USERNAME }}
      FTP_PASSWORD: ${{ secrets.WEB_FTP_PASSWORD }}
      FTP_HOST: ${{ secrets.WEB_FTP_HOST }}
    run: |
      cd dist # Adjust this if your build output directory is different
      lftp -c "set ssl:verify-certificate no; open -u $FTP_USERNAME,$FTP_PASSWORD $FTP_HOST; mirror -R -e -x .git/ ./"

  - name: Clean up
    run: echo "Clean up step"
